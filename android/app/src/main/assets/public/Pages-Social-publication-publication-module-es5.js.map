{"version":3,"sources":["webpack:///src/app/Pages/Social/publication/publication.page.html","webpack:///src/app/Pages/Social/publication/publication-routing.module.ts","webpack:///src/app/Pages/Social/publication/publication.module.ts","webpack:///src/app/Pages/Social/publication/publication.page.scss","webpack:///src/app/Pages/Social/publication/publication.page.ts"],"names":["routes","path","component","PublicationPageRoutingModule","imports","forChild","exports","PublicationPageModule","declarations","PublicationPage","router","route","publicationService","sanitizer","camera","mediaCapture","actionSheetController","imagePicker","base64","videoExist","typePublication","hospedaje","utils","publication","multimediaSelected","getAccessData","bypassSecurityTrustUrl","src","typeContent","loadingPresent","console","log","post","accessUserData","getAuthorization","subscribe","Response","loadingDismiss","updatePublications","alertPresent","navigate","Errors","buildErrors","create","header","buttons","text","handler","takePhoto","PictureSourceType","CAMERA","takeVideo","role","actionSheet","present","pickImages","pickVideo","PHOTOLIBRARY","options","maximumImagesCount","quality","outputType","getPictures","then","images","extensionImage","i","substr","lastIndexOf","encodeFile","base64File","multimedia","push","base","ext","err","length","isVideo","sourceType","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","correctOrientation","getPicture","imageData","limit","captureVideo","data","fullPath","VIDEO","videoUrl","dirpath","includes","selector","template"],"mappings":"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","file":"Pages-Social-publication-publication-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Nueva Publicación</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <div *ngIf=\\\"!multimediaSelected\\\">\\r\\n    <div *ngIf=\\\"isVideo\\\" width=\\\"320\\\" height=\\\"240\\\" controls class=\\\"videoPlayer\\\">\\r\\n      <video controls preload=\\\"metadata\\\" class=\\\"videoPlayer\\\" width=\\\"100%\\\" height=\\\"240\\\">\\r\\n        <source [src]=\\\"getImgContent()\\\" type=\\\"video/mp4\\\">\\r\\n        </video>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"!isVideo\\\">\\r\\n      <img [src]=\\\"getImgContent()\\\"/>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <ion-icon name=\\\"text-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n    <ion-label position=\\\"floating\\\">Título</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]='publication.title' name=\\\"title\\\" required></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <ion-icon name=\\\"document-text-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n    <ion-label position=\\\"floating\\\">Descripcción</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]='publication.description' name=\\\"description\\\" required></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label>Tipo de publicación</ion-label>\\r\\n    <ion-select [(ngModel)]='typePublication' [interfaceOptions]=\\\"customActionSheetOptions\\\" interface=\\\"action-sheet\\\" placeholder=\\\"Seleccionar\\\">\\r\\n      <ion-select-option value=\\\"8\\\">Hospedaje</ion-select-option>\\r\\n      <ion-select-option value=\\\"9\\\">Evento</ion-select-option>\\r\\n      <ion-select-option value=\\\"10\\\">Viaje</ion-select-option>\\r\\n      <ion-select-option value=\\\"2\\\">Estado</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n\\r\\n  <div [ngSwitch]=\\\"typePublication\\\">\\r\\n    \\r\\n    <div *ngSwitchCase=\\\"8\\\">\\r\\n      <app-entertainment [publication]=\\\"publication\\\" [typePublication]=\\\"typePublication\\\"></app-entertainment>\\r\\n    </div>\\r\\n\\r\\n    <div *ngSwitchCase=\\\"9\\\">\\r\\n      <app-entertainment [publication]=\\\"publication\\\" [typePublication]=\\\"typePublication\\\"></app-entertainment>\\r\\n    </div>\\r\\n\\r\\n    <div *ngSwitchCase=\\\"10\\\">\\r\\n      <app-entertainment [publication]=\\\"publication\\\" [typePublication]=\\\"typePublication\\\"></app-entertainment>\\r\\n    </div>\\r\\n\\r\\n    <div *ngSwitchDefault>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"multimediaSelected\\\">\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-icon name=\\\"images-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n      <ion-label>Imagen / Video</ion-label>\\r\\n      <ion-input type=\\\"text\\\" readonly name=\\\"image\\\" (click)=\\\"menuMultimedia()\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  \\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-icon name=\\\"camera-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n      <ion-label>Cámara</ion-label>\\r\\n      <ion-input type=\\\"text\\\" readonly name=\\\"camera\\\" (click)=\\\"menuCamera()\\\"></ion-input>\\r\\n    </ion-item>\\r\\n  </div>\\r\\n  \\r\\n  <ion-item lines=\\\"full\\\">\\r\\n    <ion-icon name=\\\"card-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n    <ion-toggle  [(ngModel)]=\\\"publication.monetized\\\" name=\\\"monetized\\\"></ion-toggle><ion-label>Monetizar</ion-label>\\r\\n  </ion-item>\\r\\n\\r\\n\\r\\n  <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" (click)=\\\"post()\\\">Publicar</ion-button>\\r\\n\\r\\n  \\r\\n  \\r\\n</ion-content>\\r\\n\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { PublicationPage } from './publication.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PublicationPage\r\n  }\r\n\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PublicationPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { PublicationPageRoutingModule } from './publication-routing.module';\r\nimport { PublicationPage } from './publication.page';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ComponentsModule,\r\n    PublicationPageRoutingModule\r\n  ],\r\n  declarations: [PublicationPage]\r\n})\r\nexport class PublicationPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL1BhZ2VzL1NvY2lhbC9wdWJsaWNhdGlvbi9wdWJsaWNhdGlvbi5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, NavigationExtras, Router} from '@angular/router';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { CaptureError, CaptureImageOptions, MediaCapture, MediaFile } from '@ionic-native/media-capture/ngx';\r\nimport { Publication } from '../../../Models/Classes/publication';\r\nimport { PublicationService } from 'src/app/services/publication.service';\r\nimport { Utils } from 'src/app/Models/Classes/utils';\r\nimport { AccessUserData } from 'src/app/Models/Classes/access-user-data';\r\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\r\nimport { ActionSheetController, LoadingController } from '@ionic/angular';\r\nimport { ImagePicker } from '@ionic-native/image-picker/ngx';\r\nimport { Base64 } from '@ionic-native/base64/ngx';\r\n\r\n\r\n@Component({\r\n\tselector: 'app-publication',\r\n\ttemplateUrl: './publication.page.html',\r\n\tstyleUrls: ['./publication.page.scss'],\r\n})\r\nexport class PublicationPage implements OnInit {\r\n\r\n\tpublic publication: Publication;\r\n\tprivate utils: Utils;\r\n\tprivate isVideo: boolean;\r\n\tprivate src: string;\r\n\tprivate videoExist: boolean = false;\r\n\tprivate accessdata: AccessUserData;\r\n\tprivate typePublication = null;\r\n\tprivate hospedaje = false;\r\n\tprivate checkIn: string; \r\n\tprivate checkOut: string;\r\n\tprivate multimediaSelected: boolean;\r\n\t\t\r\n\tconstructor(\r\n\t\tprivate router: Router,\r\n\t\tprivate route: ActivatedRoute,\r\n\t\tpublic publicationService: PublicationService,\r\n\t\tprivate sanitizer: DomSanitizer,\r\n\t\tprivate camera: Camera,\r\n\t\tprivate mediaCapture: MediaCapture,\r\n\t\tpublic actionSheetController: ActionSheetController,\r\n\t\tprivate imagePicker: ImagePicker,\r\n\t\tprivate base64: Base64\r\n\t) { \r\n\t\tthis.utils = new Utils();\r\n\t\tthis.publication = new Publication();\r\n\t}\r\n\r\n\tasync ngOnInit() {\t\t\r\n\t\t/*this.src = this.publication.multimedia[0].base;\r\n\t\tif(this.publication.multimedia[0].ext != 'mp4') this.isVideo = false;\r\n\t\telse this.isVideo = true;*/\r\n\r\n\t\t/*this.platform.backButton.subscribeWithPriority(10, () => {\r\n\t\t\tthis.router.navigate(['social']);\r\n\t\t});*/\r\n\t\tthis.multimediaSelected = true;\r\n\r\n\t\tawait this.utils.getAccessData();\r\n\t}\r\n\tpublic getImgContent():SafeUrl {\r\n        return this.sanitizer.bypassSecurityTrustUrl(this.src);\r\n    }\r\n\r\n\tpublic async post() {\r\n\t\t//console.log(this.publication);\r\n\t\tif(this.publication.typeContent == null) this.publication.typeContent = 7;\r\n\r\n\t\tawait this.utils.loadingPresent();\r\n\r\n\t\tconsole.log(this.publication);\r\n\r\n\t\tthis.publicationService.post(this.publication, this.utils.accessUserData.getAuthorization()).subscribe(\r\n\t\t\tasync (Response: (any)) => {\r\n\t\t\t\tthis.publication = new Publication();\r\n\t\t\t\tconsole.log(Response);\r\n\t\t\t\tthis.publicationService.publication = new Publication();\r\n\t\t\t\tconsole.log('publicación terminada');\r\n\t\t\t\tconsole.log(this.publication);\r\n\t\t\t\tthis.utils.loadingDismiss();\r\n\t\t\t\tthis.updatePublications();\r\n\t\t\t\tthis.src = \"\"; \r\n\t\t\t\tthis.utils.alertPresent('Exito', 'Publicación realizada con exito', 'OK' );\r\n\t\t\t\tthis.router.navigate(['social']);\r\n\t\t\t},\r\n\t\t\t(Errors: (any)) => {\r\n\t\t\t\tthis.utils.loadingDismiss();\r\n\t\t\t\tconsole.log(Errors);\r\n\t\t\t\tthis.utils.alertPresent('Errors', this.utils.buildErrors(Errors), 'OK');\r\n\t\t\t},\r\n\t\t\t() => {\t\t\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tasync menuCamera() {\r\n\t\tconst actionSheet = await this.actionSheetController.create({\r\n\t\t\theader: \"Select Image source\",\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Foto',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.takePhoto(this.camera.PictureSourceType.CAMERA);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Video',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.takeVideo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Cancel',\r\n\t\t\t\trole: 'cancel'\r\n\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tawait actionSheet.present();\r\n\t}\r\n\r\n\tasync menuMultimedia(){\r\n\t\tconst actionSheet = await this.actionSheetController.create({\r\n\t\t\theader: \"Select gallery\",\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Imagen',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.pickImages();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Video',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.pickVideo(this.camera.PictureSourceType.PHOTOLIBRARY);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Cancel',\r\n\t\t\t\trole: 'cancel'\r\n\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tawait actionSheet.present();\r\n\t}\r\n\r\n\tpublic pickImages() {\r\n\r\n\t\tconst options = {\r\n\t\t\tmaximumImagesCount: 5,\r\n\t\t\tquality: 100,\r\n\t\t\toutputType: 0\r\n\t\t};\r\n\r\n\t\tthis.imagePicker.getPictures(options).then(async(images) => {\r\n\t\t\t\tfor (var i = 0; i < images.length; i++) {\r\n\t\t\t\t\tconst extensionImage = images[i].substr(images[i].lastIndexOf('.') + 1); \r\n\t\t\t\t\t await this.base64.encodeFile(images[i]).then((base64File: string) => {\r\n\t\t\t\t\t\t this.publication.multimedia.push({ base: base64File, ext: extensionImage  });\t\t\t\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//this.publicationService.publication = this.publication;\r\n\t\t\t\tif (this.publication.multimedia.length != 0){\r\n\t\t\t\t\tthis.multimediaSelected = false;\r\n\t\t\t\t\tthis.src = this.publication.multimedia[0].base;\r\n\t\t\t\t\tif(this.publication.multimedia[0].ext != 'mp4') this.isVideo = false;\r\n\t\t\t\t}\r\n\t\t}, (err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic async takePhoto(sourceType) {\r\n\t\tconst options: CameraOptions = {\r\n\t\t\tquality: 100,\r\n\t\t\tsourceType: sourceType,\r\n\t\t\tdestinationType: this.camera.DestinationType.DATA_URL,\r\n\t\t\tencodingType: this.camera.EncodingType.JPEG,\r\n\t\t\tmediaType: this.camera.MediaType.PICTURE,\r\n\t\t\tcorrectOrientation: true\r\n\t\t}\r\n\t\tthis.camera.getPicture(options).then((imageData) => {\r\n\t\t\tthis.publication.multimedia.push({ base: 'data:image/jpg;base64,' + imageData, ext: 'jpg' });\r\n\t\t\tthis.publicationService.publication = this.publication;\r\n\t\t\tif (this.publication.multimedia != null) {\r\n\t\t\t\t//this.publication = new Publication();\r\n\t\t\t\tthis.multimediaSelected = false;\r\n\t\t\t\tthis.src = this.publication.multimedia[0].base;\r\n\t\t\t\tif(this.publication.multimedia[0].ext != 'mp4') this.isVideo = false;\r\n\t\t\t}\r\n\t\t}, (err) => {\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tpublic async takeVideo() {\r\n\t\tlet options: CaptureImageOptions = { limit: 1 }\r\n\t\tawait this.mediaCapture.captureVideo(options).then(async (data: MediaFile[]) => {\r\n\t\t\tawait this.base64.encodeFile(data[0].fullPath).then((base64File: string) => {\r\n\r\n\t\t\t\tthis.publication.multimedia.push({ base: base64File, ext: 'mp4' });\r\n\t\t\t\tthis.publicationService.publication = this.publication\r\n\t\t\t\tif (this.publication.multimedia != null) {\r\n\t\t\t\t\tthis.multimediaSelected = false;\r\n\t\t\t\t\tthis.src = this.publication.multimedia[0].base;\r\n\t\t\t\t\tif(this.publication.multimedia[0].ext != 'mp4') this.isVideo = false;\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.isVideo = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//this.router.navigate(['social/social-publication']);\r\n\t\t\t\t}\r\n\t\t\t}, (err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t\t}, (err: CaptureError) => {\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic pickVideo(sourceType) {\r\n\t\tconst options: CameraOptions = {\r\n\t\t\tmediaType: this.camera.MediaType.VIDEO,\r\n\t\t\tsourceType: sourceType\r\n\t\t}\r\n\t\tthis.camera.getPicture(options)\r\n\t\t.then(async (videoUrl) => {\r\n\t\t\tif (videoUrl) {\r\n\t\t\t\tvar dirpath = videoUrl.substr(0, videoUrl.lastIndexOf('/') + 1);\r\n\t\t\t\tdirpath = dirpath.includes(\"file://\") ? dirpath : \"file://\" + dirpath;\r\n\r\n\t\t\t\tawait this.base64.encodeFile('file://' + videoUrl).then((base64File: string) => {\r\n\t\t\t\t\tthis.publication.multimedia.push({ base: base64File, ext: 'mp4' });\r\n\t\t\t\t\tthis.publicationService.publication = this.publication;\r\n\r\n\t\t\t\t\tif (this.publication.multimedia != null) {\r\n\t\t\t\t\t\tthis.src = this.publication.multimedia[0].base;\r\n\t\t\t\t\t\tif(this.publication.multimedia[0].ext != 'mp4') this.isVideo = false;\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tthis.isVideo = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.multimediaSelected = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n\r\n\tupdatePublications() {\r\n\t\tthis.publicationService.updatePublications();\r\n\t}\r\n\r\n\tshowData(){\r\n\t\tconsole.log(this.typePublication);\r\n\t}\r\n\t\r\n\r\n\tasync publications() {\r\n\t\tconst actionSheet = await this.actionSheetController.create({\r\n\t\t\theader: \"Select Type Publication\",\r\n\t\t\tbuttons: [{\r\n\t\t\t\ttext: 'Hospedaje',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.router.navigate(['social/social-publication/lodging']);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Evento',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.takeVideo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: 'Cancel',\r\n\t\t\t\trole: 'cancel'\r\n\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t\tawait actionSheet.present();\r\n\t}\r\n}\r\n"]}